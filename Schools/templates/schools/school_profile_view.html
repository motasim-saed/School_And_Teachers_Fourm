{% extends 'base.html' %}
{% load static %}

{% block title %}ملف المدرسة: {{ profile.school_name }}{% endblock %}

{% block heade %}
{% include 'partials/schools_header.html' %}
{% endblock heade %}

{% block content %}
<div class="container mt-5">
    <div class="row justify-content-center">
        <div class="col-lg-9">
            <div class="card shadow-sm">
                <div class="card-header bg-light d-flex justify-content-between align-items-center p-3">
                    <h3 class="mb-0">الملف الشخصي للمدرسة</h3>
                    <a href="{% url 'schools:school_profile_edit' %}" class="btn btn-primary">
                        <i class="fas fa-edit me-2"></i>تعديل البيانات
                    </a>
                </div>
                <div class="card-body p-4">
                    <div class="row align-items-center">
                        <!-- الشعار -->
                        <div class="col-md-4 text-center mb-4 mb-md-0">
                            {% if profile.logo %}
                            <img src="{{ profile.logo.url }}" alt="شعار المدرسة" class="img-fluid rounded-circle"
                                style="width: 180px; height: 180px; object-fit: cover; border: 5px solid #f0f0f0;">
                            {% else %}
                            <img src="{% static 'images/default-school-logo.png' %}" alt="شعار المدرسة"
                                class="img-fluid rounded-circle"
                                style="width: 180px; height: 180px; object-fit: cover; border: 5px solid #f0f0f0;">
                            {% endif %}
                        </div>
                        <!-- البيانات -->
                        {# في ملف schools/school_profile_view.html #}
                        ...
                        <div class="col-md-8">
                            <h2 class="mb-3">{{ profile.school_name }}</h2>
                            <ul class="list-group list-group-flush">
                                {# =================== عرض البيانات الجديدة هنا =================== #}
                                <li class="list-group-item">
                                    <strong>البريد الإلكتروني:</strong> {{ profile.user.email }}
                                </li>
                                <li class="list-group-item">
                                    <strong>رقم الجوال:</strong> {{ profile.user.phone_number|default:"غير محدد" }}
                                </li>
                                {# =========================================================== #}
                                <li class="list-group-item">
                                    <strong>نوع المدرسة:</strong> {{ profile.get_school_type_display }}
                                </li>
                                <li class="list-group-item">
                                    <strong>الموقع:</strong> {{ profile.location|default:"غير محدد" }}
                                </li>
                                <li class="list-group-item">
                                    <strong>تاريخ الانضمام:</strong> {{ profile.user.date_joined|date:"d F Y" }}
                                </li>
                            </ul>

                            {% if request.user.is_authenticated and request.user.user_type == 'TEACHER' %}
                            <div class="mt-3">
                                <a href="{% url 'messaging:start_conversation' recipient_id=profile.user.id %}"
                                    class="btn btn-success">
                                    <i class="fas fa-paper-plane me-2"></i>إرسال رسالة خاصة
                                </a>
                            </div>
                            {% endif %}
                        </div>
                        ...

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}